+++
title = "Data sources в Terraform"
lastmod = 2023-07-21
tags = ["Terraform"]
draft = false
+++

Источники данных используются для получения данных от [провайдеров]({{< relref "20230721184139-провайдеры_terraform.md" >}}) или, в общем смысле, от любых внешних ресурсов (например публичных облаков AWS, [GCP]({{< relref "20230522114642-google_cloud_platform.md" >}}) и др.)
Источники данных только предоставляют данные, ничего не создают и не изменяют.


## Пример использования источников данных в Terraform {#пример-использования-источников-данных-в-terraform}

```hcl
data "aws_vpc" "default {
  default = true
}
```


## Обращение к данным внутри источника {#обращение-к-данным-внутри-источника}

Допустим источник данных определён таким способом:

```hcl
data "aws_vpc" "default {
  default = true
}
```

Тогда для обращения к его аттрибуту ID можно использовать такой способ: `data.aws_vpc.default.id`


## Комбинирование источников данных {#комбинирование-источников-данных}

Например мы хотим получить подсети в AWS, но находящиеся только в дефолтной VPC:

```hcl
data "aws_subnets" "default" {
  filter {
    name   = "vpc-id"
    values = [data.aws_vpc.default.id]
  }
}
```

Мы используем второй источник данных в качестве фильтра.
